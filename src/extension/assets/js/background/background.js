/* Author: Denis Podgurskii */
import { ptk_logger } from "./class/utils.js"
import { ptk_app } from "./class/app.js"



//ptk_logger.debug = true
window.ptk_app = new ptk_app()


/* Runtime events handlers */

browser.runtime.onInstalled.addListener(function () {
    browser.storage.local.get('pentestkit_settings').then(function (result) {
        if (result.pentestkit_settings) {
            window.ptk_app.settings.mergeSettings(result.pentestkit_settings)
        }
        browser.storage.local.set({ "pentestkit_settings": window.ptk_app.settings })

        console.log("onInstalled storage")
        console.log(result.pentestkit_settings)
        console.log("onInstalled app")
        console.log(window.ptk_app.settings)
    })

    ptk_logger.log("onInstalled", "")
})


