/* Author: Denis Podgurskii */

(function () {
    if (window.ptk_integration || typeof browser === typeof undefined) return
    
    


    class ptk_integration {
        constructor() {
            this.addEventListeners()
            this.addWindowListener()
        }

        addEventListeners() {
            this.onEventListener = this.onEventListener.bind(this)
            document.addEventListener(window.ptk_integration_channel, this.onEventListener)
        }

        addWindowListener() {

        }

        onEventListener(e) {
            console.log(e.detail)
            if (this["on_" + e.detail.command]) {
                let response = this["on_" + e.detail.command](e.detail)
                console.log(response)
            }
        }

        on_get_version(detail){
            return browser.runtime.getManifest().version
        }
    }

    window.ptk_integration = new ptk_integration()
   

})()


